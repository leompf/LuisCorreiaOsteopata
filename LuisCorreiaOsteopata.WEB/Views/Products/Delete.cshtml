@model LuisCorreiaOsteopata.WEB.Data.Entities.Product

@{
    ViewData["Title"] = "Delete";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

<link href="https://cdn.jsdelivr.net/npm/quill@2.0.3/dist/quill.snow.css" rel="stylesheet" />
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/atom-one-dark.min.css" />

@section MainMenu
{
    <partial name="_Menu"></partial>
}

<section class="page-header">
    <div class="page-header__bg" style="background-image: url(assets/images/backgrounds/page-header-bg.jpg);">
    </div>
    <div class="container">
        <div class="page-header__inner">
            <h3>Editar Produto</h3>
            <div class="thm-breadcrumb__inner">
                <ul class="thm-breadcrumb list-unstyled">
                    <li><a href="index.html">Home</a></li>
                    <li><span class="icon-arrow-left"></span></li>
                    <li>Apagar Produto</li>
                </ul>
            </div>
        </div>
    </div>
</section>

<section class="appoinment-page" id="product-section" style="margin-top: -100px">
    <div class="container">
        <div class="row">
            <div class="col-xl-8 col-lg-7">
                <form asp-action="Delete" enctype="multipart/form-data">
                    <h2>Tem a certeza que pretende apagar este produto?</h2>
                    <div asp-validation-summary="ModelOnly" class="text-danger"></div>
                    <div class="row">
                        <input type="hidden" asp-for="Id" />
                        <input type="hidden" asp-for="ImageUrl" />

                        <div class="form-group row mb-2 align-items-center">
                            <label style="font-size: 1.2rem" class="col-auto col-form-label pe-1"><strong>Nome:</strong></label>
                            <div class="col-auto align-items-center ps-1">
                                <input asp-for="Name" class="form-control" readonly />
                                <span asp-validation-for="Name" class="text-danger"></span>
                            </div>

                        </div>

                        <div class="form-group row">
                            <label style="font-size: 1.2rem" class="col-auto col-form-label"><strong>Descrição do Produto:</strong></label>
                        </div>
                        <div>
                            <p>@Html.Raw(Model.Description)</p>
                        </div>
                        
                        <div class="form-group row mt-3 mb-3">
                            <label style="font-size: 1.2rem" class="col-auto col-form-label pe-1"><strong>Preço:</strong></label>
                            <div class="col-auto ps-1 align-content-center">
                                <input asp-for="Price" type="number" step="0,01" lang="pt-pt" value="@(Model != null ? Model.Price : "")" class="form-control" placeholder="00,00..." readonly />
                                <span asp-validation-for="Price" class="text-danger"></span>
                            </div>

                            <label style="font-size: 1.2rem" class="col-auto col-form-label pe-1"><strong>Disponível:</strong></label>
                            <div class="col-auto ps-1 align-content-center">
                                <input class="form-check-input" asp-for="IsAvailable" readonly />
                                <span asp-validation-for="IsAvailable" class="text-danger"></span>
                            </div>

                            <label style="font-size: 1.2rem" class="col-auto col-form-label pe-1"><strong>Stock:</strong></label>
                            <div class="col-auto ps-1 align-content-center">
                                <input type="number" asp-for="Stock" class="form-control" readonly />
                                <span asp-validation-for="Stock" class="text-danger"></span>
                            </div>
                        </div>

                        <div class="form-group">
                            <button type="submit" class="thm-btn"><i style="margin: 5px" class="fa fa-save"></i>Apagar</button>
                            <a asp-action="Index" class="cancel-btn"><i style="margin: 5px" class="fa fa-chevron-left"></i>Cancelar</a>
                        </div>
                    </div>
                </form>
            </div>
            <div class="col-xl-4">
                <img src="@Model.ImageFullPath" style="max-width: 600px; max-height: 600px; object-fit: contain; margin-left: 20px; border: 1px solid #ccc; border-radius: 5px;" />
            </div>
        </div>
    </div>
</section>

@section Scripts {
    @{
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script type="text/javascript">       
        document.addEventListener("DOMContentLoaded", function ()
        {
            const productSection = document.getElementById("product-section");
            if (productSection)
            {
                productSection.scrollIntoView({ behavior: "smooth" });
            }
        });

        const descriptionInput = document.getElementById('Description');
        if (descriptionInput.value) {
            quill.root.innerHTML = descriptionInput.value;
        }

        const form = document.querySelector('form');

        form.addEventListener('submit', function() {
          const descriptionInput = document.getElementById('Description');
          descriptionInput.value = quill.root.innerHTML;
        });
    </script>
}

